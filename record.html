<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å¯è¦–åŒ– - AIå‹‰å¼·ç®¡ç†</title>
  <style>
    body { font-family: sans-serif; background: #f0f4f8; display: flex; flex-direction: column; align-items: center; padding: 20px; }
    .nav { margin-bottom: 20px; display: flex; gap: 10px; }
    .btn-nav { background: #3b82f6; color: white; padding: 10px 15px; border-radius: 8px; text-decoration: none; font-size: 14px; font-weight: bold; }
    .btn-nav.active { background: #1e40af; }
    .card { background: white; width: 100%; max-width: 500px; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
    h1 { text-align: center; color: #333; font-size: 1.5rem; }
    .bar-container { margin-top: 20px; }
    .bar-row { margin-bottom: 15px; }
    .bar-label { font-size: 0.9rem; font-weight: bold; margin-bottom: 5px; display: flex; justify-content: space-between; }
    .bar-outer { background: #eee; border-radius: 10px; height: 20px; width: 100%; overflow: hidden; }
    .bar-inner { background: #4285f4; height: 100%; width: 0; transition: width 0.8s ease-out; }
  </style>
</head>
<body>
  <div class="nav">
    <a href="index.html" class="btn-nav">ğŸ“ è¨˜éŒ²å…¥åŠ›</a>
    <a href="ranking.html" class="btn-nav">ğŸ† ãƒ©ãƒ³ã‚­ãƒ³ã‚°</a>
    <a href="record.html" class="btn-nav active">ğŸ“Š å¯è¦–åŒ–</a>
  </div>
  <div class="card">
    <h1>ğŸ“Š å­¦ç¿’æ™‚é–“ã®å†…è¨³</h1>
    <div id="chart" class="bar-container"></div>
  </div>
  <script>
    const records = JSON.parse(localStorage.getItem("studyRecords") || "[]");
    const summary = {};
    let maxTime = 0;
    records.forEach(r => {
      if(!summary[r.subject]) summary[r.subject] = 0;
      summary[r.subject] += parseInt(r.time || 0);
      if(summary[r.subject] > maxTime) maxTime = summary[r.subject];
    });
    const chart = document.getElementById("chart");
    if(Object.keys(summary).length === 0) { chart.innerHTML = "<p style='text-align:center;'>ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</p>"; }
    Object.keys(summary).forEach(sub => {
      const percent = (summary[sub] / maxTime) * 100;
      const row = document.createElement("div"); row.className = "bar-row";
      row.innerHTML = `
        <div class="bar-label"><span>${sub}</span><span>${summary[sub]}åˆ†</span></div>
        <div class="bar-outer"><div class="bar-inner" style="width: ${percent}%"></div></div>
      `;
      chart.appendChild(row);
    });
  </script>
</body>
</html>